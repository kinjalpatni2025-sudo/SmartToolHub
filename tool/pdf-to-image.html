<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Convert PDF pages to JPG/PNG images instantly online for free.">
<title>BillBuddy365 | PDF to Image</title>
<link rel="stylesheet" href="../style.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.10.102/pdf.min.js"></script>
</head>
<body>
<header>
<nav class="navbar">
<a href="../index.html" class="logo">BillBuddy365</a>
<ul class="nav-links">
<li><a href="pdf-to-image.html">PDF to Image</a></li>
<li><a href="image-to-pdf.html">Image to PDF</a></li>
<li><a href="pdf-merge.html">PDF Merge</a></li>
</ul>
</nav>
</header>

<section class="tool-section">
<h1>PDF to Image</h1>
<p>Upload your PDF to convert each page to an image.</p>
<input type="file" id="pdfInput" accept="application/pdf">
<button id="convertBtn">Convert</button>
<div id="progressContainer"><div id="progressBar"></div></div>
<div id="imagesContainer"></div>
</section>

<footer>
<p>&copy; 2025 BillBuddy365. All Rights Reserved.</p>
</footer>

<script>
const pdfInput = document.getElementById('pdfInput');
const convertBtn = document.getElementById('convertBtn');
const progressBar = document.getElementById('progressBar');
const imagesContainer = document.getElementById('imagesContainer');

convertBtn.addEventListener('click', async () => {
    const file = pdfInput.files[0];
    if(!file){ alert('Please select a PDF'); return; }

    const fileReader = new FileReader();
    fileReader.onload = async function() {
        const typedarray = new Uint8Array(this.result);
        const pdf = await pdfjsLib.getDocument(typedarray).promise;
        imagesContainer.innerHTML = '';
        progressBar.style.width = '0%';
        for(let i=1;i<=pdf.numPages;i++){
            const page = await pdf.getPage(i);
            const viewport = page.getViewport({ scale:2 });
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.height = viewport.height;
            canvas.width = viewport.width;
            await page.render({canvasContext: context, viewport: viewport}).promise;
            const img = document.createElement('img');
            img.src = canvas.toDataURL('image/png');
            img.style.maxWidth = '100%';
            imagesContainer.appendChild(img);
            progressBar.style.width = `${(i/pdf.numPages)*100}%`;
        }
    }
    fileReader.readAsArrayBuffer(file);
});
</script>
</body>
</html>
